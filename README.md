# applydir - NOT READY FOR USE but "coming soon"!

A utility to apply changes to a codebase based on AI-generated recommendations from a `prepped_dir.txt` file (generated by `prepdir`). Designed for vibe coding with UI-based LLMs like Grok 3, enabling seamless integration of AI-suggested changes.

## Installation

```bash
pip install applydir
```

## Usage

1. Generate a `prepped_dir.txt` file using `prepdir`:
   ```bash
   prepdir .
   ```

2. Modify `prepped_dir.txt` (or create a `modified_prepped_dir.txt`) with your AI assistant, including updated file contents and additional commands.

3. Apply changes using `applydir`:
   ```bash
   applydir modified_prepped_dir.txt --base-dir /path/to/codebase
   ```

   - Use `--dry-run` to preview changes without applying them:
     ```bash
     applydir modified_prepped_dir.txt --base-dir /path/to/codebase --dry-run
     ```

   - Specify a custom config file:
     ```bash
     applydir modified_prepped_dir.txt --base-dir /path/to/codebase --config custom_config.yaml
     ```

## Configuration

The configuration file (default: `.applydir/config.yaml`, `~/.applydir/config.yaml`, or bundled `src/applydir/config.yaml`) allows customization with the following uppercase keys:

```yaml
APPLY_CHANGES:
  AUTO_APPLY: false  # Set to true to apply changes without user confirmation
COMMANDS:
  SHELL_TYPE: "bash"  # Options: "bash", "powershell", "cmd"
LOGGING:
  LEVEL: "INFO"  # Options: "DEBUG", "INFO", "WARNING", "ERROR", "CRITICAL"
```

- `APPLY_CHANGES.AUTO_APPLY`: If `true`, applies file changes automatically without prompting.
- `COMMANDS.SHELL_TYPE`: Specifies the shell for additional commands (commands are not executed automatically).
- `LOGGING.LEVEL`: Controls verbosity of logs.

Configuration files are loaded with the following precedence (first one wins):
- Custom config specified via `--config`
- Local config (`.applydir/config.yaml` in the current directory)
- Global config (`~/.applydir/config.yaml` in the user's home directory)
- Bundled config (`src/applydir/config.yaml` in the package)

## Features

- Parses `prepped_dir.txt` to extract file contents and additional commands.
- Compares original and modified files, showing diffs for updates.
- Supports creating new files and updating existing ones.
- Configurable via `config.yaml` for automatic application and shell type.
- Dry-run mode to preview changes.
- Logging for better debugging and transparency.

## Development

To set up the development environment:

```bash
git clone https://github.com/eyecantell/applydir
cd applydir
pdm install
pdm install -G test
```

Run tests:

```bash
pdm run pytest
```

## Contributing

Contributions are welcome! Please open an issue or submit a pull request at [https://github.com/eyecantell/applydir](https://github.com/eyecantell/applydir).

## License

MIT License